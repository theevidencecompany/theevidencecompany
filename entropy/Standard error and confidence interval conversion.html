<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE & CI Conversion - Entro.py</title>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --brand-primary: #184B44;
            --brand-light: #2a6e64;
            --brand-accent: #e6fffa;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f0fdfa;
            background-image: radial-gradient(#ccfbf1 1px, transparent 1px);
            background-size: 20px 20px;
            margin: 0;
            overflow-x: hidden;
            color: #334155;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-up {
            animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            opacity: 0;
        }

        /* Card Styles */
        .tool-card {
            background: white;
            border: 1px solid rgba(24, 75, 68, 0.1);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        /* Button Styles */
        .btn-brand {
            background-color: var(--brand-primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-brand:hover {
            background-color: var(--brand-light);
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(24, 75, 68, 0.2);
        }
        .btn-secondary {
            background-color: white;
            color: #334155;
            border: 1px solid #e2e8f0;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-secondary:hover {
            border-color: var(--brand-primary);
            color: var(--brand-primary);
            background-color: #f8fafc;
        }
        .btn-danger {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-danger:hover {
            background-color: #fecaca;
            border-color: #f87171;
        }

        /* Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #184B44;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #184B44;
        }
        
        /* Modal */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        /* Ad Banner */
        .ad-banner-wrapper {
            background: linear-gradient(to right, #f8fafc, #fff, #f8fafc);
            border-top: 1px solid #e2e8f0;
            padding: 2rem 0;
            margin-top: 4rem;
        }
        .ad-placeholder {
            width: 728px;
            max-width: 100%;
            height: 90px;
            background-color: #f1f5f9;
            border: 2px dashed #cbd5e1;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-size: 0.875rem;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // --- Icons ---
        const ArrowLeft = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>;
        const Calculator = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>;
        const Download = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>;
        const Copy = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>;
        const AlertCircle = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>;
        const RefreshCw = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>;
        const Info = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>;
        const XIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="M6 6 18 18"/></svg>;

        // --- Stats Logic ---
        function inverseNormalCDF(p) {
            // Acklam's algorithm
            const a1 = -3.969683028665376e+01, a2 = 2.209460984245205e+02, a3 = -2.759285104469687e+02;
            const a4 = 1.383577518672690e+02, a5 = -3.066479806614716e+01, a6 = 2.506628277459239e+00;
            const b1 = -5.447609879822406e+01, b2 = 1.615858368580409e+02, b3 = -1.556989798598866e+02;
            const b4 = 6.680131188771972e+01, b5 = -1.328068155288572e+01;
            const c1 = -7.784894002430293e-03, c2 = -3.223964580411365e-01, c3 = -2.400758277161838e+00;
            const c4 = -2.549732539343734e+00, c5 = 4.374664141464968e+00, c6 = 2.938163982698783e+00;
            const d1 = 7.784695709041462e-03, d2 = 3.224671290700398e-01, d3 = 2.445134137142996e+00;
            const d4 = 3.754408661907416e+00;
            const p_low = 0.02425, p_high = 1 - p_low;

            if (p < 0 || p > 1) return NaN;
            if (p === 0) return -Infinity;
            if (p === 1) return Infinity;

            let q, r;
            if (p < p_low) {
                q = Math.sqrt(-2 * Math.log(p));
                return (((((c1 * q + c2) * q + c3) * q + c4) * q + c5) * q + c6) /
                       ((((d1 * q + d2) * q + d3) * q + d4) * q + 1);
            } else if (p <= p_high) {
                q = p - 0.5;
                r = q * q;
                return (((((a1 * r + a2) * r + a3) * r + a4) * r + a5) * r + a6) * q /
                       (((((b1 * r + b2) * r + b3) * r + b4) * r + b5) * r + 1);
            } else {
                q = Math.sqrt(-2 * Math.log(1 - p));
                return -(((((c1 * q + c2) * q + c3) * q + c4) * q + c5) * q + c6) /
                        ((((d1 * q + d2) * q + d3) * q + d4) * q + 1);
            }
        }

        function getZScore(confidenceLevel, sides) {
            // confidenceLevel is percentage e.g., 95
            const alpha = 1 - (confidenceLevel / 100);
            const p = sides === 'two' ? 1 - (alpha / 2) : 1 - alpha;
            return inverseNormalCDF(p);
        }

        function App() {
            const [mode, setMode] = useState('se_to_ci'); // 'se_to_ci' or 'ci_to_se'
            const [sides, setSides] = useState('two'); // 'one' or 'two'
            
            // Inputs
            const [meanInput, setMeanInput] = useState('');
            const [seInput, setSeInput] = useState('');
            const [lowerInput, setLowerInput] = useState('');
            const [upperInput, setUpperInput] = useState('');
            const [confInput, setConfInput] = useState(''); // Confidence level list

            const [results, setResults] = useState([]);
            const [showModal, setShowModal] = useState(false);
            const [inputType, setInputType] = useState('manual');
            const fileInputRef = useRef(null);

            // Reset
            const handleReset = () => {
                setMeanInput('');
                setSeInput('');
                setLowerInput('');
                setUpperInput('');
                setConfInput('');
                setResults([]);
                if (fileInputRef.current) fileInputRef.current.value = "";
            };

            const calculateRow = (idx, meanStr, val2Str, val3Str, confStr) => {
                // val2 is SE (if mode 1) or Lower (if mode 2)
                // val3 is unused (if mode 1) or Upper (if mode 2)
                
                const mean = Number(meanStr);
                const conf = Number(confStr);
                
                if (isNaN(mean) || isNaN(conf)) return { id: idx, error: "Invalid Number" };
                if (conf <= 0 || conf >= 100) return { id: idx, error: "Conf% must be 0-100" };

                const z = getZScore(conf, sides);

                if (mode === 'se_to_ci') {
                    const se = Number(val2Str);
                    if (isNaN(se) || se < 0) return { id: idx, error: "Invalid SE" };
                    
                    const margin = z * se;
                    return {
                        id: idx,
                        input: `Mean=${mean}, SE=${se}, ${conf}%`,
                        output1: (mean - margin).toFixed(4), // Lower
                        output2: (mean + margin).toFixed(4), // Upper
                        type: 'CI'
                    };
                } else {
                    const lower = Number(val2Str);
                    const upper = Number(val3Str);
                    if (isNaN(lower) || isNaN(upper)) return { id: idx, error: "Invalid Limits" };
                    if (lower > upper) return { id: idx, error: "Lower > Upper" };

                    // Logic: Width based SE calculation
                    // Two-sided: Width = Upper - Lower = 2 * z * SE  => SE = (U - L) / (2z)
                    // One-sided: Width = |Upper - Lower| ... wait.
                    // For one sided, usually we just have one limit. But prompt implies converting "Confidence Interval (upper and lower limits)" to SE.
                    // If one sided, typically one limit is infinity. 
                    // However, the prompt formula says: SE = (Upper - Lower) / z_(1-alpha) for one sided.
                    // We will interpret this as the user providing the bound that isn't infinity and the mean, or just the width if valid.
                    // Let's stick strictly to prompt formula: SE = (Upper - Lower) / z.
                    
                    const divisor = sides === 'two' ? (2 * z) : z;
                    const se = (upper - lower) / divisor;

                    return {
                        id: idx,
                        input: `[${lower}, ${upper}], ${conf}%`,
                        output1: se.toFixed(4), // SE
                        type: 'SE'
                    };
                }
            };

            const handleCalculate = () => {
                // Split inputs
                const means = meanInput.split(',').map(s => s.trim());
                const confs = confInput.split(',').map(s => s.trim());
                
                let results = [];
                
                if (mode === 'se_to_ci') {
                    const ses = seInput.split(',').map(s => s.trim());
                    const maxLen = Math.max(means.length, ses.length, confs.length);
                    for(let i=0; i<maxLen; i++) {
                        const m = means[i] || "";
                        const s = ses[i] || "";
                        const c = confs[i] || "95"; // Default 95 if missing
                        if(m==="" && s==="") continue;
                        results.push(calculateRow(i, m, s, null, c));
                    }
                } else {
                    const lowers = lowerInput.split(',').map(s => s.trim());
                    const uppers = upperInput.split(',').map(s => s.trim());
                    const maxLen = Math.max(lowers.length, uppers.length, confs.length);
                    for(let i=0; i<maxLen; i++) {
                        const l = lowers[i] || "";
                        const u = uppers[i] || "";
                        const c = confs[i] || "95";
                        // Note: Mean isn't strictly needed for CI -> SE if using the width method in prompt
                        // But I'll pass mean just in case, though calculateRow uses Val2/Val3 for limits
                        if(l==="" && u==="") continue;
                        results.push(calculateRow(i, null, l, u, c)); 
                    }
                }
                setResults(results);
            };

            // File upload logic (Simplified for this snippet, assumes manual entry flow or pre-parsing)
            // Ideally, file upload would parse into these comma-separated strings.
            const handleFileUpload = (e) => {
                 const file = e.target.files[0];
                 if(!file) return;
                 const reader = new FileReader();
                 reader.onload = (evt) => {
                     // Basic dump to text areas for manual correction/verification
                     alert("File loaded. Please ensure data is in columns format (Mean, SE, etc.) and paste into respective boxes.");
                 };
                 reader.readAsText(file);
            };

            const exportCSV = () => {
                const header = mode === 'se_to_ci' ? "Input,Lower CI,Upper CI" : "Input,Standard Error";
                const rows = results.map(r => 
                    mode === 'se_to_ci' 
                    ? `"${r.input}",${r.output1},${r.output2}`
                    : `"${r.input}",${r.output1}`
                ).join("\n");
                const csv = `data:text/csv;charset=utf-8,${header}\n${rows}`;
                const link = document.createElement("a");
                link.setAttribute("href", encodeURI(csv));
                link.setAttribute("download", "results.csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            const copyToClipboard = () => {
                const text = results.map(r => {
                     if (mode === 'se_to_ci') {
                        return `${r.input}\t${r.output1}\t${r.output2}`;
                     } else {
                         return `${r.input}\t${r.output1}`;
                     }
                }).join("\n");
                
                // Create a temporary textarea element
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                
                // Select the text
                textarea.select();
                
                try {
                    // Use execCommand for broader compatibility including iframes
                    const successful = document.execCommand('copy');
                    if(successful) {
                         alert("Copied to clipboard!");
                    } else {
                         alert("Failed to copy. Please try manually.");
                    }
                } catch (err) {
                    alert("Failed to copy: " + err);
                }
                
                // Remove the temporary element
                document.body.removeChild(textarea);
            };

            return (
                <div className="min-h-screen flex flex-col">
                     <header className="bg-white border-b border-slate-200 py-4 sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-6 flex items-center justify-between">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => window.location.href='index.html'}>
                                <img src="Entropy.png" alt="Entro.py" className="h-8" />
                            </div>
                            <a href="all_converters.html" className="text-sm font-medium text-[#184B44] hover:text-[#2a6e64] transition-colors flex items-center gap-1">
                                <ArrowLeft /> Back to Tools
                            </a>
                        </div>
                    </header>

                    <main className="flex-grow max-w-5xl mx-auto px-6 py-12 w-full z-0">
                         <div className="text-center mb-10 animate-fade-up">
                            <h1 className="text-3xl font-bold text-[#184B44] mb-3">Standard Error & CI Conversion</h1>
                            <p className="text-slate-600 max-w-2xl mx-auto">
                                Convert between standard errors and confidence intervals for display and downstream calculations.
                            </p>
                        </div>

                         <div className="max-w-3xl mx-auto mb-8 animate-fade-up" style={{animationDelay: '0.1s'}}>
                            <div className="bg-[#fffbeb] border border-[#fcd34d] rounded-lg p-5 shadow-sm">
                                <h3 className="font-semibold text-[#92400e] flex items-center gap-2 mb-2">
                                    <AlertCircle /> Assumptions
                                </h3>
                                <ul className="list-disc pl-5 space-y-1 text-sm text-[#92400e]/90">
                                    <li>Independent observations.</li>
                                    <li>Standard deviation refers to the same sample used for the mean.</li>
                                </ul>
                            </div>
                        </div>

                        <div className="tool-card animate-fade-up" style={{animationDelay: '0.2s'}}>
                            {/* Controls */}
                            <div className="flex flex-wrap items-center justify-between gap-4 mb-8 border-b border-slate-100 pb-6">
                                <div className="flex gap-2">
                                    <button 
                                        onClick={() => { setMode('se_to_ci'); setResults([]); }}
                                        className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${mode === 'se_to_ci' ? 'bg-[#184B44] text-white shadow-md' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}
                                    >
                                        SE → CI
                                    </button>
                                    <button 
                                        onClick={() => { setMode('ci_to_se'); setResults([]); }}
                                        className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${mode === 'ci_to_se' ? 'bg-[#184B44] text-white shadow-md' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}
                                    >
                                        CI → SE
                                    </button>
                                </div>

                                <div className="flex items-center gap-4">
                                    <div className="flex items-center gap-2">
                                        <span className={`text-sm font-medium ${sides === 'one' ? 'text-[#184B44]' : 'text-slate-400'}`}>One-Sided</span>
                                        <div className="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                            <input type="checkbox" name="toggle" id="toggle" className="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" checked={sides === 'two'} onChange={() => setSides(s => s === 'one' ? 'two' : 'one')}/>
                                            <label htmlFor="toggle" className="toggle-label block overflow-hidden h-6 rounded-full bg-slate-300 cursor-pointer"></label>
                                        </div>
                                        <span className={`text-sm font-medium ${sides === 'two' ? 'text-[#184B44]' : 'text-slate-400'}`}>Two-Sided</span>
                                    </div>
                                    <button onClick={() => setShowModal(true)} className="text-[#184B44] hover:bg-[#e6fffa] p-2 rounded-full transition-colors"><Info /></button>
                                </div>
                            </div>

                            {/* Input Fields */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                                <div className="space-y-4">
                                    {/* Common Inputs */}
                                    <div>
                                        <label className="block text-sm font-medium text-slate-700 mb-1">Confidence Level % (comma-separated)</label>
                                        <textarea className="w-full h-16 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#184B44] focus:border-[#184B44] outline-none resize-none font-mono text-sm" placeholder="95, 99, 90" value={confInput} onChange={(e) => setConfInput(e.target.value)}></textarea>
                                    </div>

                                    {mode === 'se_to_ci' ? (
                                        <>
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700 mb-1">Mean Estimate (comma-separated)</label>
                                                <textarea className="w-full h-24 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#184B44] focus:border-[#184B44] outline-none resize-none font-mono text-sm" placeholder="10.5, 20.1" value={meanInput} onChange={(e) => setMeanInput(e.target.value)}></textarea>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700 mb-1">Standard Error (comma-separated)</label>
                                                <textarea className="w-full h-24 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#184B44] focus:border-[#184B44] outline-none resize-none font-mono text-sm" placeholder="1.2, 0.5" value={seInput} onChange={(e) => setSeInput(e.target.value)}></textarea>
                                            </div>
                                        </>
                                    ) : (
                                        <>
                                             <div>
                                                <label className="block text-sm font-medium text-slate-700 mb-1">Lower CI Limit (comma-separated)</label>
                                                <textarea className="w-full h-24 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#184B44] focus:border-[#184B44] outline-none resize-none font-mono text-sm" placeholder="8.1, 15.5" value={lowerInput} onChange={(e) => setLowerInput(e.target.value)}></textarea>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700 mb-1">Upper CI Limit (comma-separated)</label>
                                                <textarea className="w-full h-24 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#184B44] focus:border-[#184B44] outline-none resize-none font-mono text-sm" placeholder="12.9, 25.0" value={upperInput} onChange={(e) => setUpperInput(e.target.value)}></textarea>
                                            </div>
                                        </>
                                    )}

                                    <div className="flex gap-2 pt-2">
                                        <button onClick={handleCalculate} className="btn-brand w-full justify-center"><Calculator /> Calculate</button>
                                        <button onClick={handleReset} className="btn-danger w-auto px-4"><RefreshCw /></button>
                                    </div>
                                </div>

                                {/* Results */}
                                <div className="bg-slate-50 rounded-lg border border-slate-200 p-4 flex flex-col h-full min-h-[300px]">
                                     <div className="flex justify-between items-center mb-3">
                                        <h4 className="text-sm font-semibold text-slate-700">Results</h4>
                                        <div className="flex gap-2">
                                            <button onClick={copyToClipboard} className="p-1 hover:bg-white rounded text-slate-500 hover:text-[#184B44]" title="Copy"><Copy /></button>
                                            <button onClick={exportCSV} className="p-1 hover:bg-white rounded text-slate-500 hover:text-[#184B44]" title="Download CSV"><Download /></button>
                                        </div>
                                    </div>
                                    <div className="flex-grow overflow-y-auto max-h-96 bg-white border border-slate-100 rounded">
                                        <table className="w-full text-sm text-left">
                                            <thead className="bg-slate-50 text-xs uppercase text-slate-500 sticky top-0">
                                                <tr>
                                                    <th className="px-4 py-2 border-b">Input</th>
                                                    <th className="px-4 py-2 border-b">{mode === 'se_to_ci' ? 'CI Range' : 'Std Error'}</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-100">
                                                 {results.length === 0 ? (
                                                    <tr><td colSpan="2" className="px-4 py-8 text-center text-slate-400 italic">No data calculated yet.</td></tr>
                                                ) : (
                                                    results.map((row) => (
                                                        <tr key={row.id}>
                                                            <td className="px-4 py-2 font-mono text-slate-600 border-r border-slate-100 max-w-[150px] truncate" title={row.input}>{row.input}</td>
                                                            <td className={`px-4 py-2 font-mono font-medium ${row.error ? 'text-red-500' : 'text-[#184B44]'}`}>
                                                                {row.error ? row.error : (mode === 'se_to_ci' ? `[${row.output1}, ${row.output2}]` : row.output1)}
                                                            </td>
                                                        </tr>
                                                    ))
                                                )}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                         
                        <div className="max-w-3xl mx-auto mt-12 pt-8 border-t border-slate-200 animate-fade-up" style={{animationDelay: '0.3s'}}>
                            <h3 className="text-sm font-bold text-slate-800 mb-3 uppercase tracking-wider">Reference</h3>
                            <div className="text-xs text-slate-500 leading-relaxed">
                                <p>Altman, D. G., & Bland, J. M. (2011). How to obtain the P value from a confidence interval. BMJ, 343, d2304. <a href="https://doi.org/10.1136/bmj.d2304" target="_blank" className="text-[#184B44] hover:underline">https://doi.org/10.1136/bmj.d2304</a></p>
                            </div>
                        </div>
                    </main>

                    {/* Modal */}
                    {showModal && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 modal-overlay" onClick={() => setShowModal(false)}>
                            <div className="bg-white rounded-xl max-w-2xl w-full p-6 shadow-2xl relative animate-fade-up" onClick={e => e.stopPropagation()}>
                                <button onClick={() => setShowModal(false)} className="absolute top-4 right-4 text-slate-400 hover:text-slate-600"><XIcon /></button>
                                <h3 className="text-xl font-bold text-[#184B44] mb-4">One-Sided vs Two-Sided Intervals</h3>
                                <div className="mb-4">
                                    <img src="Two One sided.png" alt="One vs Two Sided" className="w-full rounded-lg border border-slate-200" style={{aspectRatio: "11/6"}} />
                                </div>
                                <p className="text-sm text-slate-600 leading-relaxed">
                                    Choosing the right interval depends on whether you need to account for deviations in both directions or just one. A <strong>two-sided interval</strong> is used when any change is relevant, like testing if a new medication changes blood pressure either higher or lower than the current standard. A <strong>one-sided interval</strong> is used when you only care about a specific directional benefit, such as verifying that a new car battery lasts longer than the previous model.
                                </p>
                            </div>
                        </div>
                    )}
                    
                    {/* Ad Sense */}
                    <div className="ad-banner-wrapper">
                        <div className="max-w-7xl mx-auto px-6 text-center">
                            <div className="ad-placeholder">
                                <span className="font-medium">Google AdSense Space (Responsive / 728x90)</span>
                            </div>
                            <p className="text-xs text-slate-400 mt-4">Advertisement</p>
                        </div>
                    </div>

                    <footer className="bg-white border-t border-slate-200">
                        <div className="max-w-7xl mx-auto px-6 py-8 flex flex-col items-center justify-center gap-4">
                            <div className="flex items-center gap-2 opacity-80 hover:opacity-100 transition-opacity">
                                <span className="text-sm font-semibold text-[#184B44]">Entro.py</span>
                                <span className="text-slate-300">|</span>
                                <span className="text-sm text-slate-500">by Threadminds</span>
                            </div>
                            <p className="text-xs text-slate-400">&copy; {new Date().getFullYear()} Threadminds. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>